<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AEGIS: Active Defense System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Top Header Bar -->
    <header class="header">
        <div class="header-left">
            <h1 class="header-title">AEGIS: ACTIVE DEFENSE SYSTEM</h1>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="main-container">
        <!-- Video Panels Container -->
        <div class="video-container">
            <!-- Left Panel: Raw Feed (Vulnerable) -->
            <div class="video-panel vulnerable">
                <h2 class="panel-title">RAW FEED</h2>
                <div class="video-wrapper">
                    <img id="rawFeed" src="" alt="Raw Video Feed" class="video-stream">
                    <div class="panel-overlay"></div>
                </div>
            </div>

            <!-- Divider -->
            <div class="panel-divider"></div>

            <!-- Right Panel: Blur-Fixed (Defended) -->
            <div class="video-panel defended">
                <h2 class="panel-title">AEGIS PROCESSED</h2>
                <div class="video-wrapper">
                    <img id="processedFeed" src="" alt="Processed Video Feed with Blur Correction" class="video-stream">
                    <div class="panel-overlay"></div>
                </div>
            </div>
        </div>

        <!-- System Status & Alert Console -->
        <section class="console-section">
            <!-- Real-time Alert Banner (full width) -->
            <div class="alert-banner-container">
                <div class="alert-banner" id="alertBanner">
                    <p class="alert-message">System Active - All Sensors Online</p>
                </div>
            </div>

            <!-- Status and Audio Logging Row -->
            <div class="status-audio-row">
                <div class="status-container">
                    <div class="status-badge secure" id="statusBadge">
                        <span class="status-pulse"></span>
                        STATUS: SECURE
                    </div>
                </div>
                <div class="audio-recording-indicator" id="audioIndicator">
                    <span class="recording-light"></span>
                    <span class="recording-text">Audio Logging: OFF</span>
                </div>
            </div>

            <!-- Four Column Layout (3 columns) -->
            <div class="four-column-layout">
                <!-- Column 1: Detection Log -->
                <div class="layout-column detection-log-column">
                    <h3 class="log-title">Detection Log</h3>
                    <div class="log-content" id="detectionLog">
                        <div class="log-entry secure">
                            <span class="log-time">Initializing...</span>
                            <span class="log-message">System started</span>
                        </div>
                    </div>
                </div>

                <!-- Column 2: Audio Subtitle Log -->
                <div class="layout-column audio-log-column">
                    <h3 class="log-title">Audio Subtitle Log</h3>
                    <div class="log-content" id="subtitleLog">
                        <div class="log-entry secure">
                            <span class="log-time">Waiting...</span>
                            <span class="log-message">Audio logging disabled</span>
                        </div>
                    </div>
                </div>

                <!-- Column 3: Sensor Configuration -->
                <div class="layout-column sensor-config-column">
                    <h3 class="log-title">Sensor Configuration</h3>
                    <div class="settings-grid-compact">
                        <div class="sensor-setting-compact">
                            <label for="blur-toggle" class="setting-label-compact">
                                <input type="checkbox" id="blur-toggle" class="setting-checkbox" data-sensor="blur" checked>
                                <span class="setting-name-compact">Blur</span>
                            </label>
                        </div>

                        <div class="sensor-setting-compact">
                            <label for="shake-toggle" class="setting-label-compact">
                                <input type="checkbox" id="shake-toggle" class="setting-checkbox" data-sensor="shake" checked>
                                <span class="setting-name-compact">Shake</span>
                            </label>
                        </div>

                        <div class="sensor-setting-compact">
                            <label for="glare-toggle" class="setting-label-compact">
                                <input type="checkbox" id="glare-toggle" class="setting-checkbox" data-sensor="glare" checked>
                                <span class="setting-name-compact">Glare</span>
                            </label>
                        </div>

                        <div class="sensor-setting-compact">
                            <label for="liveness-toggle" class="setting-label-compact">
                                <input type="checkbox" id="liveness-toggle" class="setting-checkbox" data-sensor="liveness" checked>
                                <span class="setting-name-compact">Liveness</span>
                            </label>
                        </div>

                        <div class="sensor-setting-compact">
                            <label for="reposition-toggle" class="setting-label-compact">
                                <input type="checkbox" id="reposition-toggle" class="setting-checkbox" data-sensor="reposition" checked>
                                <span class="setting-name-compact">Reposition</span>
                            </label>
                        </div>

                        <div class="sensor-setting-compact">
                            <label for="blur-fix-toggle" class="setting-label-compact">
                                <input type="checkbox" id="blur-fix-toggle" class="setting-checkbox" data-sensor="blur_fix" checked>
                                <span class="setting-name-compact">Blur Fix</span>
                            </label>
                        </div>

                        <div class="sensor-setting-compact">
                            <label for="glare-rescue-toggle" class="setting-label-compact">
                                <input type="checkbox" id="glare-rescue-toggle" class="setting-checkbox" data-sensor="glare_rescue" checked>
                                <span class="setting-name-compact">Glare Rescue</span>
                            </label>
                        </div>

                        <div class="sensor-setting-compact">
                            <label for="sound-toggle" class="setting-label-compact">
                                <input type="checkbox" id="sound-toggle" class="setting-checkbox" data-sensor="audio_alerts" checked>
                                <span class="setting-name-compact">Audio</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Metrics Row (bottom) -->
            <div class="metrics-row">
                <h3 class="log-title">Real-Time Metrics</h3>
                <div class="metrics-grid-bottom">
                    <div class="metric-item-compact">
                        <div class="metric-label-compact">Blur</div>
                        <div class="metric-value-compact" id="blurValue">-</div>
                        <div class="metric-indicator-compact" id="blurIndicator">‚óè</div>
                    </div>
                    <div class="metric-item-compact">
                        <div class="metric-label-compact">Shake</div>
                        <div class="metric-value-compact" id="shakeValue">-</div>
                        <div class="metric-indicator-compact" id="shakeIndicator">‚óè</div>
                    </div>
                    <div class="metric-item-compact">
                        <div class="metric-label-compact">Glare</div>
                        <div class="metric-value-compact" id="glareValue">-</div>
                        <div class="metric-indicator-compact" id="glareIndicator">‚óè</div>
                        <div class="glare-histogram" id="glareHistogram"></div>
                    </div>
                    <div class="metric-item-compact">
                        <div class="metric-label-compact">Liveness</div>
                        <div class="metric-value-compact" id="livenessValue">-</div>
                        <div class="metric-indicator-compact" id="livenessIndicator">‚óè</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Repositioning Alert Modal -->
    <div id="repositionAlertModal" class="alert-modal hidden">
        <div class="alert-modal-content">
            <div class="alert-modal-icon">üö®</div>
            <h2 class="alert-modal-title">Camera Repositioning Detected</h2>
            <p class="alert-modal-message">The surveillance camera has been actively moved. Immediate action may be required.</p>
            <button class="alert-modal-button" onclick="dismissRepositionAlert()">DISMISS ALERT</button>
        </div>
    </div>

    <!-- Socket.IO Client Library -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
