<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AEGIS: Active Defense System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Top Header Bar -->
    <header class="header">
        <div class="header-left">
            <h1 class="header-title">AEGIS: ACTIVE DEFENSE SYSTEM</h1>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="main-container">
        <!-- Video Panels Container -->
        <div class="video-container">
            <!-- Left Panel: Raw Feed (Vulnerable) -->
            <div class="video-panel vulnerable">
                <h2 class="panel-title">RAW FEED</h2>
                <div class="video-wrapper">
                    <img id="rawFeed" src="" alt="Raw Video Feed" class="video-stream">
                    <div class="panel-overlay"></div>
                </div>
            </div>

            <!-- Divider -->
            <div class="panel-divider"></div>

            <!-- Right Panel: Blur-Fixed (Defended) -->
            <div class="video-panel defended">
                <h2 class="panel-title">AEGIS PROCESSED</h2>
                <div class="video-wrapper">
                    <img id="processedFeed" src="" alt="Processed Video Feed with Blur Correction" class="video-stream">
                    <div class="panel-overlay"></div>
                </div>
            </div>
        </div>

        <!-- System Status & Alert Console -->
        <section class="console-section">
            <!-- Live Status Indicator -->
            <div class="status-container">
                <div class="status-badge secure" id="statusBadge">
                    <span class="status-pulse"></span>
                    STATUS: SECURE
                </div>
                <!-- Audio Logging Indicator -->
                <div class="audio-recording-indicator" id="audioIndicator">
                    <span class="recording-light"></span>
                    <span class="recording-text">Audio Logging: OFF</span>
                </div>
            </div>

            <!-- Real-time Alert Banner -->
            <div class="alert-banner-container">
                <div class="alert-banner" id="alertBanner">
                    <p class="alert-message">System Active - All Sensors Online</p>
                </div>
            </div>

            <!-- Tabs Container -->
            <div class="tabs-container">
                <button class="tab-button active" data-tab="detection-log-tab">Detection Log</button>
                <button class="tab-button" data-tab="audio-log-tab">Audio Log</button>
                <button class="tab-button" data-tab="settings-tab">Settings</button>
            </div>

            <!-- Detection Log Tab -->
            <div id="detection-log-tab" class="tab-content active">
                <h3 class="log-title">Detection Log</h3>
                <div class="log-content" id="detectionLog">
                    <div class="log-entry secure">
                        <span class="log-time">Initializing...</span>
                        <span class="log-message">System started</span>
                    </div>
                </div>
            </div>

            <!-- Audio Log Tab -->
            <div id="audio-log-tab" class="tab-content">
                <h3 class="log-title">Audio Subtitle Log</h3>
                <div class="log-content" id="subtitleLog">
                    <div class="log-entry secure">
                        <span class="log-time">Waiting...</span>
                        <span class="log-message">Audio logging disabled</span>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings-tab" class="tab-content">
                <h3 class="log-title">Sensor Configuration</h3>
                <div class="settings-grid">
                    <div class="sensor-setting">
                        <label for="blur-toggle" class="setting-label">
                            <input type="checkbox" id="blur-toggle" class="setting-checkbox" data-sensor="blur" checked>
                            <span class="setting-name">Blur Detection</span>
                        </label>
                    </div>

                    <div class="sensor-setting">
                        <label for="shake-toggle" class="setting-label">
                            <input type="checkbox" id="shake-toggle" class="setting-checkbox" data-sensor="shake" checked>
                            <span class="setting-name">Shake Detection</span>
                        </label>
                    </div>

                    <div class="sensor-setting">
                        <label for="glare-toggle" class="setting-label">
                            <input type="checkbox" id="glare-toggle" class="setting-checkbox" data-sensor="glare" checked>
                            <span class="setting-name">Glare Detection</span>
                        </label>
                    </div>

                    <div class="sensor-setting">
                        <label for="liveness-toggle" class="setting-label">
                            <input type="checkbox" id="liveness-toggle" class="setting-checkbox" data-sensor="liveness" checked>
                            <span class="setting-name">Liveness Detection</span>
                        </label>
                    </div>

                    <div class="sensor-setting">
                        <label for="reposition-toggle" class="setting-label">
                            <input type="checkbox" id="reposition-toggle" class="setting-checkbox" data-sensor="reposition" checked>
                            <span class="setting-name">Reposition Detection</span>
                        </label>
                    </div>

                    <div class="sensor-setting">
                        <label for="blur-fix-toggle" class="setting-label">
                            <input type="checkbox" id="blur-fix-toggle" class="setting-checkbox" data-sensor="blur_fix" checked>
                            <span class="setting-name">Blur Correction</span>
                        </label>
                    </div>

                    <div class="sensor-setting">
                        <label for="glare-rescue-toggle" class="setting-label">
                            <input type="checkbox" id="glare-rescue-toggle" class="setting-checkbox" data-sensor="glare_rescue" checked>
                            <span class="setting-name">Glare Rescue</span>
                        </label>
                    </div>

                    <div class="sensor-setting">
                        <label for="sound-toggle" class="setting-label">
                            <input type="checkbox" id="sound-toggle" class="setting-checkbox" data-sensor="audio_alerts" checked>
                            <span class="setting-name">Microphone On</span>
                        </label>
                    </div>
                </div>
            </div>
        </section>

        <!-- Detection Metrics Panel -->
        <section class="metrics-section">
            <div class="metric-item">
                <div class="metric-header">
                    <div class="metric-label">Blur</div>
                    <label class="metric-toggle">
                        <input type="checkbox" class="sensor-checkbox-inline" data-sensor="blur" checked>
                        <span class="toggle-switch-small"></span>
                    </label>
                </div>
                <div class="metric-value" id="blurValue">-</div>
                <div class="metric-indicator" id="blurIndicator">‚óè</div>
            </div>
            <div class="metric-item">
                <div class="metric-header">
                    <div class="metric-label">Shake</div>
                    <label class="metric-toggle">
                        <input type="checkbox" class="sensor-checkbox-inline" data-sensor="shake" checked>
                        <span class="toggle-switch-small"></span>
                    </label>
                </div>
                <div class="metric-value" id="shakeValue">-</div>
                <div class="metric-indicator" id="shakeIndicator">‚óè</div>
            </div>
            <div class="metric-item">
                <div class="metric-header">
                    <div class="metric-label">Glare</div>
                    <label class="metric-toggle">
                        <input type="checkbox" class="sensor-checkbox-inline" data-sensor="glare" checked>
                        <span class="toggle-switch-small"></span>
                    </label>
                </div>
                <div class="metric-value" id="glareValue">-</div>
                <div id="glareHistogram" class="glare-histogram"></div>
                <div class="metric-indicator" id="glareIndicator">‚óè</div>
            </div>
            <div class="metric-item">
                <div class="metric-header">
                    <div class="metric-label">Liveness</div>
                    <label class="metric-toggle">
                        <input type="checkbox" class="sensor-checkbox-inline" data-sensor="liveness" checked>
                        <span class="toggle-switch-small"></span>
                    </label>
                </div>
                <div class="metric-value" id="livenessValue">-</div>
                <div class="metric-indicator" id="livenessIndicator">‚óè</div>
            </div>
        </section>
            </div>
        </section>
    </main>

    <!-- Repositioning Alert Modal -->
    <div id="repositionAlertModal" class="alert-modal hidden">
        <div class="alert-modal-content">
            <div class="alert-modal-icon">üö®</div>
            <h2 class="alert-modal-title">Camera Repositioning Detected</h2>
            <p class="alert-modal-message">The surveillance camera has been actively moved. Immediate action may be required.</p>
            <button class="alert-modal-button" onclick="dismissRepositionAlert()">DISMISS ALERT</button>
        </div>
    </div>

    <!-- Socket.IO Client Library -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
